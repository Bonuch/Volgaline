<template>
    <div
        class="menu z-100 fixed left-0 top-0 w-full h-full bg-black-400 bg-opacity-60 overflow-hidden"
        @click.self="closeMobileMenu"
    >
        <div
            class="menu__wrap custom-scrollbar z-1 relative overflow-x-hidden overflow-y-auto flex flex-col h-full py-6 bg-white text-black-400 text-base font-bold">
            <div class="flex items-center justify-between px-4 mb-5">
                <svg
                    width="200"
                    height="44"
                    viewBox="0 0 255 54"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <path d="M47.8888 22.9585C46.9737 22.9585 45.9303 23.5203 45.7536 23.8736C45.577 24.2269 45.7823 25.2875 46.3637 25.0937C46.9002 24.9148 48.1938 24.4836 48.4988 23.8736C48.8039 23.2635 48.4988 22.9585 47.8888 22.9585Z" fill="#006CAE"></path> <path d="M43.3134 25.0937C43.151 24.9312 42.0933 25.0937 41.7883 25.7037C41.5381 26.2042 41.8493 26.6188 42.0933 26.6188C42.3374 26.6188 43.0084 26.3138 43.3134 26.0087C43.6185 25.7037 43.6184 25.3987 43.3134 25.0937Z" fill="#006CAE"></path> <path d="M40.5682 26.9238C40.5682 26.6941 40.5682 26.0087 39.9582 26.3138C39.5814 26.5021 39.0431 26.9848 39.0431 27.2288C39.0431 27.8389 39.6531 27.8389 39.9582 27.5339C40.2632 27.2288 40.5682 27.2288 40.5682 26.9238Z" fill="#006CAE"></path> <path d="M35.6878 20.8235C30.8074 23.7821 27.2332 26.9707 27.1472 27.534C27.0612 28.0974 28.5828 26.7552 30.0231 25.705C33.6893 23.0318 42.4826 19.1167 44.5335 18.0783C45.2473 17.7169 46.0558 17.3814 46.9737 17.3192C47.5202 17.2822 48.043 17.4071 48.1938 17.3192C48.5978 17.0836 47.5838 15.6381 46.0586 15.6381C45.1273 15.5506 40.5682 17.8648 35.6878 20.8235Z" fill="#006CAE"></path> <path d="M45.4486 20.2133C36.6029 23.8736 26.0747 30.5885 26.0747 30.8247C25.9238 31.3546 29.5874 29.364 32.9426 27.8389C41.4833 23.9568 49.4139 20.8234 53.9893 19.6033C55.5817 19.1787 56.6951 18.701 58.5647 18.9932C59.6777 19.1672 61.8834 20.0221 62.2249 19.9083C63.14 19.6033 60.7361 17.4802 58.8697 16.8581C57.0395 16.248 53.2228 16.4959 45.4486 20.2133Z" fill="#006CAE"></path> <path d="M60.6999 36.3798C60.6999 36.3798 66.1903 30.8894 66.1903 31.1944C66.1903 31.4994 62.53 36.9898 61.9199 38.2099C60.9269 40.1961 60.9674 40.8376 60.6999 42.1752C60.5168 43.0903 60.0898 43.0903 60.0898 43.0903C56.7345 42.4803 52.4578 40.5463 49.1089 39.43C42.7034 37.2949 37.213 36.9898 37.213 36.6848C37.213 36.3798 53.9772 38.2099 56.4295 38.2099C58.2597 38.2099 60.2932 36.7865 60.6999 36.3798Z" fill="#006CAE"></path> <path d="M81.1364 18.0783C75.646 16.2482 26.8422 33.3295 26.8422 33.9395C26.8422 34.2793 37.394 30.7601 46.6687 28.1441C54.0479 26.0627 60.5067 24.7888 61.0048 24.7888C62.1291 24.7888 69.5455 23.2637 70.7656 27.229C71.5164 29.6692 66.4953 34.5496 64.6651 37.5998C62.835 40.6501 63.0155 43.7003 63.445 43.7003C63.8746 43.7003 63.7501 40.5673 68.3254 36.0747C72.9008 31.5821 85.4866 19.5284 81.1364 18.0783Z" fill="#006CAE"></path> <path d="M36.6028 38.5145C32.6495 37.7615 25.927 37.9045 23.4868 38.5145C23.4868 38.5145 20.7416 39.4296 24.4019 39.4296C27.4521 39.4296 29.8923 39.6126 34.1627 40.0396C39.9581 40.6192 45.2452 42.7848 47.8887 44.0049C51.0406 45.3267 58.1985 48.0922 61.6148 48.5803C65.8851 49.1903 65.8851 48.8853 68.6304 48.8853C70.8265 48.8853 73.6124 47.8686 74.7308 47.3602C75.0359 47.0552 76.988 46.8112 70.1555 47.0552C63.3229 47.2992 55.5143 44.31 52.1591 43.3949C48.6005 42.1748 43.0083 39.7346 36.6028 38.5145Z" fill="#00B3E8"></path> <path d="M49.7189 47.3602C36.2979 41.8697 32.3325 40.9546 23.7919 41.2597C22.5718 41.3032 22.3888 42.4798 24.0969 42.4798C33.9289 43.7622 40.7592 46.104 46.6687 47.9702C49.1926 48.7672 50.329 48.9615 53.9892 50.1054C58.8696 51.6305 53.5825 48.9869 49.7189 47.3602Z" fill="#00B3E8"></path> <path d="M25.2694 34.1595C24.6183 32.6207 24.5325 31.2167 25.012 29.0591C25.5331 26.714 27.3897 25.2593 28.11 24.6949L33.2476 20.8234C35.6878 19.2983 37.6464 18.3349 38.2017 18.0458C38.343 17.9722 38.4853 17.9005 38.6834 17.8007L38.7079 17.7883C36.0871 15.3203 32.5563 13.8079 28.6723 13.8079C20.5862 13.8079 14.0311 20.3629 14.0311 28.449C14.0311 34.0583 17.1856 38.9309 21.8173 41.3896C21.8173 41.3896 21.5123 40.1503 21.8173 38.3202C22.1223 36.4901 22.3888 36.1966 22.8768 35.4646C23.3649 34.7325 24.6752 34.1878 25.2694 34.1595Z" fill="#BC002D"></path> <path d="M7.62565 27.5336C5.79551 28.4487 3.05029 29.0588 3.05029 29.0588C3.05029 29.0588 5.79551 29.6688 7.62565 30.5839C9.4558 31.499 11.591 33.3291 11.591 33.3291C11.591 33.3291 10.9809 30.2789 10.9809 29.0588C10.9809 27.8387 11.591 24.7884 11.591 24.7884C11.591 24.7884 9.45579 26.6186 7.62565 27.5336Z" fill="#BC002D"></path> <path d="M30.1974 8.01213C29.2824 6.18198 28.6723 3.43677 28.6723 3.43677C28.6723 3.43677 28.0623 6.18198 27.1472 8.01213C26.2321 9.84227 24.402 11.9774 24.402 11.9774C24.402 11.9774 27.4522 11.3674 28.6723 11.3674C29.8924 11.3674 32.9426 11.9774 32.9426 11.9774C32.9426 11.9774 31.1125 9.84227 30.1974 8.01213Z" fill="#BC002D"></path> <path d="M13.647 14.7139C13.3404 13.9073 14.1306 13.1171 14.9371 13.4237L16.6503 14.0751C17.3282 14.3329 17.5149 15.2041 17.002 15.7169L15.9402 16.7787C15.4273 17.2916 14.5562 17.105 14.2984 16.427L13.647 14.7139Z" fill="#BC002D"></path> <path d="M40.6757 14.082L43.0091 13.1948C43.6075 12.9673 44.2264 13.4611 44.0331 14.0715C43.9767 14.2495 43.8351 14.4707 43.675 14.5668L41.5343 15.8511C41.1459 16.0842 40.486 15.8602 40.1657 15.5399C39.6594 15.0336 40.0064 14.3365 40.6757 14.082Z" fill="#BC002D"></path> <path d="M97.0513 37.7521C95.9386 37.7521 94.8259 37.7131 93.7131 37.635C92.6199 37.5764 91.4779 37.4202 90.2871 37.1665V17.4888C91.2241 17.3131 92.249 17.1862 93.3618 17.1081C94.4745 17.0105 95.5091 16.9617 96.4657 16.9617C97.7541 16.9617 98.9351 17.0593 100.009 17.2545C101.102 17.4302 102.039 17.7425 102.82 18.1915C103.601 18.6405 104.206 19.2359 104.635 19.9777C105.084 20.7 105.309 21.598 105.309 22.6717C105.309 24.292 104.528 25.5707 102.966 26.5077C104.255 26.9957 105.133 27.6595 105.602 28.4989C106.07 29.3383 106.305 30.2851 106.305 31.3393C106.305 33.4671 105.524 35.0679 103.962 36.1416C102.42 37.2153 100.116 37.7521 97.0513 37.7521ZM94.738 28.6453V33.8868C95.0699 33.9259 95.431 33.9552 95.8215 33.9747C96.2119 33.9942 96.6414 34.004 97.1099 34.004C98.4764 34.004 99.5794 33.8088 100.419 33.4183C101.258 33.0279 101.678 32.3056 101.678 31.2514C101.678 30.3144 101.327 29.6507 100.624 29.2602C99.921 28.8503 98.9156 28.6453 97.6077 28.6453H94.738ZM94.738 25.1607H96.9635C98.369 25.1607 99.3744 24.985 99.9795 24.6336C100.585 24.2627 100.887 23.6771 100.887 22.8767C100.887 22.0568 100.575 21.4809 99.9503 21.149C99.3256 20.8172 98.4081 20.6512 97.1977 20.6512C96.8073 20.6512 96.3876 20.661 95.9386 20.6805C95.4896 20.6805 95.0894 20.7 94.738 20.7391V25.1607Z" fill="#006CAE"></path> <path d="M123.636 29.758C123.636 30.9684 123.46 32.0811 123.109 33.0962C122.758 34.0918 122.25 34.9508 121.586 35.6731C120.922 36.3758 120.122 36.9224 119.185 37.3129C118.268 37.7033 117.233 37.8985 116.081 37.8985C114.949 37.8985 113.914 37.7033 112.977 37.3129C112.06 36.9224 111.269 36.3758 110.605 35.6731C109.942 34.9508 109.424 34.0918 109.053 33.0962C108.682 32.0811 108.497 30.9684 108.497 29.758C108.497 28.5477 108.682 27.4447 109.053 26.4491C109.444 25.4535 109.971 24.6043 110.635 23.9016C111.318 23.1988 112.118 22.6522 113.036 22.2618C113.973 21.8713 114.988 21.6761 116.081 21.6761C117.194 21.6761 118.209 21.8713 119.127 22.2618C120.064 22.6522 120.864 23.1988 121.528 23.9016C122.191 24.6043 122.709 25.4535 123.08 26.4491C123.451 27.4447 123.636 28.5477 123.636 29.758ZM119.185 29.758C119.185 28.411 118.912 27.3569 118.365 26.5955C117.838 25.8147 117.077 25.4243 116.081 25.4243C115.086 25.4243 114.314 25.8147 113.768 26.5955C113.221 27.3569 112.948 28.411 112.948 29.758C112.948 31.105 113.221 32.1787 113.768 32.9791C114.314 33.7599 115.086 34.1504 116.081 34.1504C117.077 34.1504 117.838 33.7599 118.365 32.9791C118.912 32.1787 119.185 31.105 119.185 29.758Z" fill="#006CAE"></path> <path d="M133.487 25.6585C133.468 26.2246 133.438 26.8298 133.399 27.474C133.38 28.0987 133.331 28.7332 133.253 29.3774C133.175 30.0021 133.067 30.617 132.931 31.2221C132.814 31.8273 132.658 32.3934 132.462 32.9205C132.228 33.5452 131.925 34.1309 131.555 34.6775C131.203 35.2045 130.744 35.6828 130.178 36.1123C129.632 36.5418 128.958 36.9029 128.158 37.1957C127.377 37.469 126.459 37.6545 125.405 37.7521L124.82 34.1211C125.815 33.9259 126.586 33.6526 127.133 33.3012C127.68 32.9303 128.089 32.4618 128.363 31.8956C128.578 31.4076 128.743 30.8415 128.861 30.1973C128.997 29.5531 129.095 28.8796 129.153 28.1768C129.212 27.4545 129.241 26.7224 129.241 25.9806C129.261 25.2388 129.271 24.5263 129.271 23.843V22.0861H140.837V37.4886H136.474V25.6585H133.487Z" fill="#006CAE"></path> <path d="M155.418 25.6585H148.859V37.4886H144.496V22.0861H155.418V25.6585Z" fill="#006CAE"></path> <path d="M163.211 34.4432C163.64 34.4432 164.05 34.4334 164.441 34.4139C164.831 34.3944 165.144 34.3651 165.378 34.3261V31.0172C165.202 30.9781 164.939 30.9391 164.587 30.9C164.236 30.861 163.914 30.8415 163.621 30.8415C163.211 30.8415 162.821 30.8708 162.45 30.9293C162.098 30.9684 161.786 31.0562 161.513 31.1929C161.239 31.3295 161.025 31.515 160.868 31.7492C160.712 31.9835 160.634 32.2763 160.634 32.6277C160.634 33.311 160.859 33.7892 161.308 34.0625C161.776 34.3163 162.411 34.4432 163.211 34.4432ZM162.86 21.6761C164.148 21.6761 165.222 21.8225 166.081 22.1154C166.94 22.4082 167.623 22.8279 168.13 23.3745C168.658 23.9211 169.028 24.5848 169.243 25.3657C169.458 26.1466 169.565 27.0153 169.565 27.9718V37.0493C168.941 37.186 168.072 37.3421 166.959 37.5178C165.846 37.7131 164.499 37.8107 162.918 37.8107C161.923 37.8107 161.015 37.7228 160.195 37.5471C159.395 37.3714 158.702 37.0884 158.116 36.6979C157.53 36.288 157.081 35.7609 156.769 35.1167C156.457 34.4725 156.3 33.6819 156.3 32.7448C156.3 31.8468 156.476 31.0855 156.827 30.4608C157.198 29.8361 157.686 29.3383 158.292 28.9674C158.897 28.5965 159.59 28.333 160.371 28.1768C161.151 28.0011 161.962 27.9132 162.801 27.9132C163.367 27.9132 163.865 27.9425 164.294 28.0011C164.743 28.0401 165.105 28.0987 165.378 28.1768V27.7668C165.378 27.025 165.153 26.4296 164.704 25.9806C164.255 25.5316 163.475 25.3071 162.362 25.3071C161.62 25.3071 160.888 25.3657 160.166 25.4828C159.443 25.5804 158.819 25.7268 158.292 25.9221L157.735 22.4082C157.989 22.3301 158.301 22.252 158.672 22.1739C159.063 22.0763 159.482 21.9982 159.931 21.9397C160.38 21.8616 160.849 21.803 161.337 21.764C161.845 21.7054 162.352 21.6761 162.86 21.6761Z" fill="#006CAE"></path> <path d="M187.543 21.0614C187.485 22.3694 187.407 23.6871 187.309 25.0145C187.231 26.3225 187.075 27.5914 186.841 28.8212C186.626 30.0511 186.304 31.2029 185.874 32.2766C185.464 33.3502 184.888 34.297 184.147 35.1169C183.424 35.9368 182.517 36.5908 181.423 37.0789C180.33 37.5669 178.993 37.8402 177.412 37.8988L176.914 33.9164C178.319 33.7602 179.403 33.4088 180.164 32.8622C180.926 32.2961 181.502 31.4371 181.892 30.2854C182.38 28.8603 182.722 27.0253 182.917 24.7803C183.132 22.5158 183.239 19.9878 183.239 17.1962H197.089V37.4888H192.521V21.0614H187.543Z" fill="#006CAE"></path> <path d="M206.93 34.4434C207.36 34.4434 207.77 34.4337 208.16 34.4142C208.55 34.3946 208.863 34.3654 209.097 34.3263V31.0174C208.921 30.9784 208.658 30.9393 208.306 30.9003C207.955 30.8612 207.633 30.8417 207.34 30.8417C206.93 30.8417 206.54 30.871 206.169 30.9296C205.817 30.9686 205.505 31.0565 205.232 31.1931C204.958 31.3298 204.744 31.5152 204.588 31.7495C204.431 31.9837 204.353 32.2766 204.353 32.6279C204.353 33.3112 204.578 33.7895 205.027 34.0628C205.495 34.3166 206.13 34.4434 206.93 34.4434ZM206.579 21.6764C207.867 21.6764 208.941 21.8228 209.8 22.1156C210.659 22.4084 211.342 22.8281 211.85 23.3747C212.377 23.9213 212.748 24.5851 212.962 25.3659C213.177 26.1468 213.284 27.0155 213.284 27.9721V37.0496C212.66 37.1862 211.791 37.3424 210.678 37.5181C209.566 37.7133 208.219 37.8109 206.637 37.8109C205.642 37.8109 204.734 37.7231 203.914 37.5474C203.114 37.3717 202.421 37.0886 201.835 36.6982C201.249 36.2882 200.8 35.7611 200.488 35.1169C200.176 34.4727 200.02 33.6821 200.02 32.7451C200.02 31.8471 200.195 31.0857 200.547 30.461C200.918 29.8364 201.406 29.3386 202.011 28.9677C202.616 28.5967 203.309 28.3332 204.09 28.177C204.871 28.0013 205.681 27.9135 206.52 27.9135C207.086 27.9135 207.584 27.9428 208.014 28.0013C208.463 28.0404 208.824 28.0989 209.097 28.177V27.7671C209.097 27.0253 208.873 26.4299 208.424 25.9809C207.975 25.5319 207.194 25.3074 206.081 25.3074C205.339 25.3074 204.607 25.3659 203.885 25.4831C203.162 25.5807 202.538 25.7271 202.011 25.9223L201.454 22.4084C201.708 22.3303 202.02 22.2522 202.391 22.1742C202.782 22.0766 203.202 21.9985 203.651 21.9399C204.1 21.8618 204.568 21.8033 205.056 21.7642C205.564 21.7056 206.071 21.6764 206.579 21.6764Z" fill="#006CAE"></path> <path d="M230.817 22.0863V37.4888H226.424C226.424 36.5127 226.434 35.5464 226.454 34.5899C226.473 33.6138 226.493 32.7158 226.512 31.8959C226.532 31.076 226.551 30.3634 226.571 29.7583C226.61 29.1336 226.629 28.6748 226.629 28.382C226.063 29.1824 225.497 29.9925 224.931 30.8124C224.365 31.6323 223.818 32.4425 223.291 33.2429C222.784 34.0237 222.296 34.7753 221.827 35.4976C221.378 36.2199 220.978 36.8836 220.626 37.4888H216.79V22.0863H221.154C221.154 23.0624 221.144 23.9994 221.124 24.8974C221.124 25.7759 221.115 26.5763 221.095 27.2986C221.075 28.0209 221.056 28.6553 221.036 29.2019C221.017 29.729 221.007 30.139 221.007 30.4318C222.178 28.7139 223.252 27.1717 224.228 25.8052C225.224 24.4387 226.19 23.199 227.127 22.0863H230.817ZM223.877 19.978C223.252 19.978 222.647 19.8901 222.061 19.7144C221.495 19.5192 220.978 19.2459 220.509 18.8945C220.041 18.5236 219.65 18.0844 219.338 17.5768C219.045 17.0498 218.87 16.4544 218.811 15.7906L221.827 15C221.983 15.7418 222.237 16.2689 222.588 16.5812C222.959 16.8936 223.389 17.0498 223.877 17.0498C224.384 17.0498 224.814 16.9131 225.165 16.6398C225.536 16.347 225.8 15.8101 225.956 15.0293L228.943 15.8199C228.884 16.4836 228.699 17.079 228.386 17.6061C228.093 18.1137 227.713 18.5432 227.244 18.8945C226.795 19.2459 226.278 19.5192 225.692 19.7144C225.107 19.8901 224.501 19.978 223.877 19.978Z" fill="#006CAE"></path> <path d="M247.746 37.4888H243.383V31.3981H238.844V37.4888H234.481V22.0863H238.844V27.8256H243.383V22.0863H247.746V37.4888Z" fill="#006CAE"></path>
                    @click="onLogoClick"
                </svg>

                <button
                    type="button"
                    class="menu__close button w-6 h-6 bg-transparent text-gray-200"
                    @click="onMenuCloseClick"
                >
                    <svg
                        class="w-full h-full fill-current"
                        xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                        viewBox="0 0 512.001 512.001"
                    >
                        <path
                            d="M284.286,256.002L506.143,34.144c7.811-7.811,7.811-20.475,0-28.285c-7.811-7.81-20.475-7.811-28.285,0L256,227.717
                                L34.143,5.859c-7.811-7.811-20.475-7.811-28.285,0c-7.81,7.811-7.811,20.475,0,28.285l221.857,221.857L5.858,477.859
                                c-7.811,7.811-7.811,20.475,0,28.285c3.905,3.905,9.024,5.857,14.143,5.857c5.119,0,10.237-1.952,14.143-5.857L256,284.287
                                l221.857,221.857c3.905,3.905,9.024,5.857,14.143,5.857s10.237-1.952,14.143-5.857c7.811-7.811,7.811-20.475,0-28.285
                                L284.286,256.002z"
                        />
                    </svg>
                </button>
            </div>

            <nav v-if="getMainNav && getMainNav.length > 0" class="menu__item menu-nav">
                <ul class="m-0 p-0">
                    <MobileMenuNavItem
                        v-for="(item) in getMainNav"
                        :key="item.id"
                        :item="item"
                    />
                </ul>
            </nav>

            <div class="my-6 relative">
                <template v-if="getUser && Object.keys(getUser).length > 0">
                    <button
                        type="button"
                        class="w-full flex items-center py-5 px-4 bg-blue-900 hover:bg-orange-400"
                        @click="showUserDropdown = !showUserDropdown"
                    >
                        <svg class="mr-3" width="22" height="24" viewBox="0 0 22 24" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                  d="M7 7.375C7 4.7067 8.89833 2.75 11 2.75C13.1017 2.75 15 4.7067 15 7.375C15 10.0433 13.1017 12 11 12C8.89833 12 7 10.0433 7 7.375ZM11 0.75C7.57882 0.75 5 3.83009 5 7.375C5 10.9199 7.57882 14 11 14C14.4212 14 17 10.9199 17 7.375C17 3.83009 14.4212 0.75 11 0.75ZM19.9379 22H2.0621C2.17821 21.1206 2.44853 20.4621 2.79965 19.9592C3.27427 19.2796 3.95619 18.7992 4.81275 18.4616C6.58412 17.7633 8.87883 17.75 10.9996 17.75C13.1202 17.75 15.4151 17.7634 17.1867 18.4616C18.0435 18.7993 18.7255 19.2797 19.2002 19.9593C19.5514 20.4621 19.8218 21.1207 19.9379 22ZM10.9996 15.75L10.9089 15.75C8.89663 15.7498 6.23928 15.7495 4.07931 16.6009C2.9539 17.0445 1.91279 17.736 1.15989 18.8142C0.405564 19.8944 0 21.2776 0 23C0 23.5523 0.447715 24 1 24H21C21.5523 24 22 23.5523 22 23C22 21.2776 21.5943 19.8943 20.8399 18.8141C20.0868 17.736 19.0456 17.0445 17.9201 16.6009C15.76 15.7496 13.1027 15.7498 11.0907 15.75L10.9996 15.75Z"
                                  fill="white"
                            />
                        </svg>

                        <span class="flex-1 text-base text-white text-left font-bold uppercase">Профиль</span>
                    </button>

                    <UserDropdown
                        v-show="showUserDropdown"
                        class="w-full"
                        @on-close="onCloseUserDropdown"
                    />
                </template>

                <button
                    v-else
                    type="button"
                    class="flex items-center w-full text-left py-5 px-4 bg-blue-900 hover:bg-orange-400"
                    @click="onUserClick"
                >
                    <svg class="mr-3" width="22" height="24" viewBox="0 0 22 24" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <path
                            fill-rule="evenodd" clip-rule="evenodd"
                            d="M7 7.375C7 4.7067 8.89833 2.75 11 2.75C13.1017 2.75 15 4.7067 15 7.375C15 10.0433 13.1017 12 11 12C8.89833 12 7 10.0433 7 7.375ZM11 0.75C7.57882 0.75 5 3.83009 5 7.375C5 10.9199 7.57882 14 11 14C14.4212 14 17 10.9199 17 7.375C17 3.83009 14.4212 0.75 11 0.75ZM19.9379 22H2.0621C2.17821 21.1206 2.44853 20.4621 2.79965 19.9592C3.27427 19.2796 3.95619 18.7992 4.81275 18.4616C6.58412 17.7633 8.87883 17.75 10.9996 17.75C13.1202 17.75 15.4151 17.7634 17.1867 18.4616C18.0435 18.7993 18.7255 19.2797 19.2002 19.9593C19.5514 20.4621 19.8218 21.1207 19.9379 22ZM10.9996 15.75L10.9089 15.75C8.89663 15.7498 6.23928 15.7495 4.07931 16.6009C2.9539 17.0445 1.91279 17.736 1.15989 18.8142C0.405564 19.8944 0 21.2776 0 23C0 23.5523 0.447715 24 1 24H21C21.5523 24 22 23.5523 22 23C22 21.2776 21.5943 19.8943 20.8399 18.8141C20.0868 17.736 19.0456 17.0445 17.9201 16.6009C15.76 15.7496 13.1027 15.7498 11.0907 15.75L10.9996 15.75Z"
                            fill="white"
                        />
                    </svg>

                    <span class="flex-1 text-base text-white font-bold uppercase">Зарегистрироваться</span>
                </button>
            </div>

            <a
                v-if="phoneNumberFiltered"
                :href="`tel:${phoneNumberFiltered}`"
                class="block px-4 mb-4 text-22 font-bold hover:text-blue-400"
            >
                {{ phoneNumber }}
            </a>

            <p class="px-4 mb-4">
                <button type="button" class="button" @click="onModalCallClick">Заказать звонок</button>
            </p>



            <div class="px-4 mb-10">

                <div class="flex items-center mb-1">
                    <svg class="mr-2" width="30" height="23" viewBox="0 0 30 23" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M15 21.875L19.8746 13.4546L21.8984 19.1578H20.2643V21.6674H30V19.1578H28.1418L21.1484 0.875L15 12.1315L8.85164 0.875L1.85822 19.1578H0V21.6674H9.7357V19.1578H8.10155L10.1254 13.4546L15 21.875Z"
                            fill="#DA3E34"/>
                    </svg>
                    <span v-if="metroName">{{ metroName }}</span>
                </div>

                <div class="mb-2 flex items-center">
                    <svg class="mr-2" width="30" height="30" viewBox="0 0 24 25" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12 13.4199C13.6569 13.4199 15 12.0768 15 10.4199C15 8.76307 13.6569 7.41992 12 7.41992C10.3431 7.41992 9 8.76307 9 10.4199C9 12.0768 10.3431 13.4199 12 13.4199Z"
                            stroke="#DA3E34" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path
                            d="M19.5 10.4199C19.5 17.1699 12 22.4199 12 22.4199C12 22.4199 4.5 17.1699 4.5 10.4199C4.5 8.4308 5.29018 6.52314 6.6967 5.11662C8.10322 3.7101 10.0109 2.91992 12 2.91992C13.9891 2.91992 15.8968 3.7101 17.3033 5.11662C18.7098 6.52314 19.5 8.4308 19.5 10.4199V10.4199Z"
                            stroke="#DA3E34" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>

                    <span v-if="officeAddress">{{ officeAddress }}</span>
                </div>

                <div
                    v-if="workTime"
                    class="mb-4 flex items-center"
                >
                    <span class="flex justify-center items-center mr-2" style="width: 30px; height: 30px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 0C9.62663 0 7.30655 0.703788 5.33316 2.02236C3.35977 3.34094 1.8217 5.21509 0.913451 7.4078C0.00519943 9.60051 -0.232441 12.0133 0.230582 14.3411C0.693605 16.6689 1.83649 18.8071 3.51472 20.4853C5.19295 22.1635 7.33115 23.3064 9.65892 23.7694C11.9867 24.2324 14.3995 23.9948 16.5922 23.0866C18.7849 22.1783 20.6591 20.6402 21.9776 18.6668C23.2962 16.6935 24 14.3734 24 12C23.9966 8.81846 22.7312 5.76821 20.4815 3.51852C18.2318 1.26883 15.1815 0.00344108 12 0V0ZM12 22C10.0222 22 8.08879 21.4135 6.4443 20.3147C4.79981 19.2159 3.51809 17.6541 2.76121 15.8268C2.00433 13.9996 1.8063 11.9889 2.19215 10.0491C2.578 8.10929 3.53041 6.32746 4.92894 4.92893C6.32746 3.53041 8.10929 2.578 10.0491 2.19215C11.9889 1.8063 13.9996 2.00433 15.8268 2.7612C17.6541 3.51808 19.2159 4.79981 20.3147 6.4443C21.4135 8.08879 22 10.0222 22 12C21.9971 14.6513 20.9426 17.1931 19.0679 19.0679C17.1931 20.9426 14.6513 21.9971 12 22Z"
                                  fill="#DA3E34"/>
                            <path d="M11.9998 6C11.7346 6 11.4803 6.10536 11.2927 6.29289C11.1052 6.48043 10.9998 6.73478 10.9998 7V11.325L7.62882 13.437C7.40339 13.5778 7.24313 13.8024 7.18331 14.0614C7.12349 14.3204 7.16899 14.5926 7.30982 14.818C7.45065 15.0434 7.67527 15.2037 7.93426 15.2635C8.19324 15.3233 8.46539 15.2778 8.69082 15.137L12.5308 12.737C12.6759 12.6461 12.7952 12.5195 12.8773 12.3692C12.9595 12.219 13.0016 12.0502 12.9998 11.879V7C12.9998 6.73478 12.8945 6.48043 12.7069 6.29289C12.5194 6.10536 12.265 6 11.9998 6Z"
                                  fill="#DA3E34"/>
                        </svg>
                    </span>

                    <span>{{ workTime }}</span>
                </div>
            </div>

            <div v-if="getSocials && getSocials.length > 0" class="flex items-center justify-between mt-auto px-4">
                <SocialItem
                    v-for="(item) in getSocials"
                    :key="item.id"
                    :item="item"
                    class="text-blue-900 hover:text-orange-400"
                />
            </div>
        </div>
    </div>
</template>

<script>
    import { mapGetters, mapActions } from "vuex";
    import Logo from "./Logo";
    import MobileMenuNavItem from "./MobileMenuNavItem";
    import { parsePhoneMixin } from "@/mixins/content-helpers";
    import SocialItem from "./SocialItem";
    import MiniLogo from "./MiniLogo";
    import UserDropdown from './UserDropdown';

    export default {
        name: "MobileMenu",
        components: { UserDropdown, MiniLogo, SocialItem, MobileMenuNavItem, Logo },
        mixins: [parsePhoneMixin],
        data() {
            return {
                showUserDropdown: false,
            };
        },
        computed: {
            ...mapGetters({
                getMobileMenuActivity: "getMobileMenuActivity",
                getMainNav: "getMainNav",
                getSettingsByName: "getSettingsByName",
                getSocials: "getSocials",
                "getUser": "users/getUser",
            }),
            phoneNumber() {
                return this.getSettingsByName('phone', 'value');
            },
            phoneNumberFiltered() {
                return this.getSettingsByName('phone', 'value_2');
            },
            metroName() {
                return this.getSettingsByName('sales_office', 'value');
            },
            officeAddress() {
                return this.getSettingsByName('sales_office', 'value_2');
            },
            workTime() {
                return this.getSettingsByName('work_time', 'value');
            },
        },
        methods: {
            ...mapActions({
                closeMobileMenu: "closeMobileMenu",
                openModal: "modals/openModal",
            }),
            onMenuCloseClick() {
                this.closeMobileMenu();
            },
            onLogoClick() {
              this.onMenuCloseClick();
              this.$route.path !== "/" ? this.$router.push("/") : false;
            },
            onUserClick() {
                this.closeMobileMenu();
                this.openModal({name: "ModalRegistration"});
            },
            onModalCallClick() {
                this.closeMobileMenu();
                this.openModal({name: "ModalCall"});
            },
            onCloseUserDropdown() {
                this.showUserDropdown = false;
                this.closeMobileMenu();
            },
        },
        created() {
            let onPressEsc = new KeyboardEvent("keydown", { "key": "27" });

            const closeModalOnEsc = (e) => {
                if (this.getMobileMenuActivity) {
                    if (e.key === "Escape" || e.key === "Esc") {
                        this.closeMobileMenu();
                    }
                }
            };

            document.addEventListener("keydown", closeModalOnEsc, false);
            document.dispatchEvent(onPressEsc);

            this.$once("hook:destroyed", () => {
                document.removeEventListener("keydown", closeModalOnEsc);
            });
        },
    };
</script>

<style lang="scss" scoped>
    @keyframes closeEntrace {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }

    @keyframes navLinkEntrace {
        from {
            opacity: 0;
            transform: translateX(-20px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes contactsEntrace {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    .menu {
        &__wrap {
            max-width: 380px;
        }

        &__close {
            padding: 0;
        }
    }

    @for $i from 1 through 10 {
        .menu-nav__item:nth-child(#{$i}n) {
            .menu-nav__link {
                animation-delay: #{$i * 0.25}s;
            }
        }
    }

    .menu {
        &__close {
            &:hover,
            &:focus {
                @apply text-orange-400 bg-transparent;
            }
        }
    }

    .date-work{
        font-size: 13px;
        font-weight: 400;
        line-height: 20px;
        @apply text-gray-200 m-0;
    }
</style>
